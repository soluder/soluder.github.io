---
title: 31. 连续子数组的最大和
---

## 题目描述 

输入一个整形数组，数组里有正数也有负数。数组中一个或连续的多个正数组成一个子数组。求所有子数组的和的最大值。要求时间复杂度是O(n)

该问题可以使用4中方案解决：
1. 穷举，O(N^3)
2. 优化穷举，O(N^2)
3. 分治法，O(NlogN)
4. 递归
5. 动态规划

## 解题思路

### 解法1：通过举例发现规律

例如输入为：{1,-2,3,5,-4}

|操作|累加和|最大值|
|--|--|--|
|+1|1|1|
|-2|-1(此时为负，应该抛弃，对后面的累加没有正面影响)|1|
|+3|2(继续与前面的负数累加)/3(在此处重头开始累加)|3|
|+5|8|8|
|-4|4(此时值变小了，不要紧，因为是正数，所以在后面遇到正数时还是有用的)|8|



```java 
//.java
public class Solution {
    public int FindGreatestSumOfSubArray(int[] array) {
        if (array == null || array.length == 0)
            return 0;
        int max = array[0];
        int sum = 0;
        for(int i = 0; i < array.length; i++) {
            if (sum <= 0)
                sum = array[i];     //负数无论是与正或负相加，最终的结果都会小于被加数
            else
                sum += array[i];    //加一个正数，或者期望负数后面有正数
            if (sum > max)
                max = sum;
        }
        return max;
    }
}
```

### 解法2：动态规划

递归思路：假设最大子序列和的最后一位是 i ，那么就判断它之前的最大值是否为正数而决定是否去做加法

![递归公式](/images/剑指offer/31.连续子数组的最大和.png)
